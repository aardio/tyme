import console;
import time.tyme;

var JulianDay = time.tyme.JulianDay;
var SolarDay = time.tyme.SolarDay;
var SolarTerm = time.tyme.SolarTerm;
var ShouXingUtil = time.tyme.ShouXingUtil;
var LunarYear = time.tyme.LunarYear;
var LunarMonth = time.tyme.LunarMonth;

if(SolarDay.fromYmd(2023, 1, 1).getJulianDay().getSolarDay().toString() !== '2023年1月1日'){
  error('expect :2023年1月1日\nactual: ' ++ SolarDay.fromYmd(2023, 1, 1).getJulianDay().getSolarDay().toString(), 2);
}

var term = SolarTerm.fromName(2023, '冬至');
if(term.getName() !== '冬至'){
  error('expect :冬至\nactual: ' ++ term.getName(), 2);
}

/*
//本次重构后规则已改变
if(term.getIndex() !== 0){
  error('expect :0\nactual: ' ++ tostring(term.getIndex()), 2);
}
*/

if(term.getJulianDay().getSolarDay().toString() !== '2022年12月22日'){
  error('expect :2022年12月22日\nactual: ' ++ term.getJulianDay().getSolarDay().toString(), 2);
}
if(term.getSolarDay().toString() !== '2022年12月22日'){
  error('expect :2022年12月22日\nactual: ' ++ term.getSolarDay().toString(), 2);
}

if(SolarTerm.fromName(1034, "寒露").getSolarDay().toString() !== '1034年10月1日'){
  error('expect :1034年10月1日\nactual: ' ++ SolarTerm.fromName(1034, "寒露").getSolarDay().toString(), 2);
}
if(SolarTerm.fromName(1034, "寒露").getJulianDay().getSolarDay().toString() !== '1034年10月3日'){
  error('expect :1034年10月3日\nactual: ' ++ SolarTerm.fromName(1034, "寒露").getJulianDay().getSolarDay().toString(), 2);
}
if(SolarTerm.fromName(1034, "寒露").getJulianDay().getSolarTime().toString() !== '1034年10月3日 06:02:28'){
  error('expect :1034年10月3日 06:02:28\nactual: ' ++ SolarTerm.fromName(1034, "寒露").getJulianDay().getSolarTime().toString(), 2);
}
 
var solar = SolarDay.fromYmd(1986, 5, 29);
if(solar.toString() !== '1986年5月29日'){
  error('expect :1986年5月29日\nactual: ' ++ solar.toString(), 2);
}

solar = SolarDay.fromYmd(1582, 10, 15);
if(solar.next(-1).toString() !== '1582年10月4日'){
  error('expect:1582年10月4日\nactual: ' ++ solar.next(-1).toString(), 2);
}

if(LunarYear.fromYear(2359).getLeapMonth() !== 7){
  error('expect:7\nactual: ' ++ tostring(LunarYear.fromYear(2359).getLeapMonth()), 2);
}

if(LunarMonth.fromYm(2359, 7).getName() !== '七月'){
  error('expect:七月\nactual: ' ++ LunarMonth.fromYm(2359, 7).getName(), 2);
}

solar = SolarDay.fromYmd(2020, 5, 24);
if(solar.getLunarDay().toString() !== '农历庚子年闰四月初二'){
  error('expect: 农历庚子年闰四月初二\nactual: ' ++ solar.getLunarDay().toString(), 2);
}
 
console.log( 'test success' );

console.pause();
